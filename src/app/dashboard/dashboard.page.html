<app-header></app-header>

<ion-content class="dashboard-wrapper">

  <!-- Welcome Banner -->
  <div class="welcome-banner">
    <img src="assets/img/icons/user_dashboard.svg" alt="">
    <div>
      <h3>Welcome {{profileName}}!</h3>
      <p>Your trusted marketplace for real-time rubber trading.</p>
    </div>
  </div>

  <!-- Market Stats Swiper -->
  <div class="market-stats-swiper" *ngIf="dashboardData && dashboardData.rubberRates && dashboardData.rubberRates.results && dashboardData.rubberRates.results.length > 0">
    <div class="swiper-header">
      <h4>International Rubber Rates</h4>

    </div>
    <swiper-container 
      class="market-swiper"
      slides-per-view="2"
      space-between="12"
      loop="true"
      autoplay-delay="3000"
      autoplay-disable-on-interaction="false">
      <swiper-slide *ngFor="let card of dashboardData.rubberRates.results" class="market-slide">
        <div class="market-card" [ngClass]="card.rate_deviation_percentage > 0 ? 'up' : 'down'">
          <p>{{ card.description }}</p>
          <h2>{{ card.rate }} <span class="change" [ngClass]="card.direction">{{ card.rate_deviation }} ({{ card.rate_deviation_percentage }})</span></h2>
        </div>
      </swiper-slide>
    </swiper-container>
  </div>

  <!-- Top Seller -->
  <div class="section" *ngIf="dashboardData && dashboardData.topSellerItems && dashboardData.topSellerItems.results && dashboardData.topSellerItems.results.length > 0">
    <div class="section-title">Top Seller</div>
  
    <!-- First Row: First 2 Items -->
    <div class="cards-row">
      <div
        class="product-card"
        *ngFor="let item of ((dashboardData?.topSellerItems?.results) ? dashboardData.topSellerItems.results : []) | slice:0:2"
      >
        <ion-badge class="success_badg">On Sale</ion-badge>
        <div class="logoCompname">
          <figure class="compIcon">
            <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
          </figure>
          <h4>{{ item?.item_name || 'Item Name' }}</h4>
        </div>
        <p>
          Dealer Name<br />
          <b *ngIf="item?.company_name">{{ item.company_name }}</b>
          <b *ngIf="item?.full_name">{{ item.full_name }}</b>
        </p>
        <h3>{{ item?.price || '0' }}</h3>
      </div>
    </div>
    
  
    <!-- Second Row: Only 3rd Item -->
    <div class="cards-row">
      <div
        class="product-card"
        *ngFor="let item of ((dashboardData?.topSellerItems?.results) ? dashboardData.topSellerItems.results : []) | slice:2:3"
      >
        <ion-badge class="success_badg">On Sale</ion-badge>
        <div class="logoCompname">
          <figure class="compIcon">
            <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
          </figure>
          <h4>{{ item?.item_name || 'Item Name' }}</h4>
        </div>
        <p>
          Dealer Name<br />
          <b *ngIf="item?.company_name">{{ item.company_name }}</b>
          <b *ngIf="item?.full_name">{{ item.full_name }}</b>
        </p>
        <h3>{{ item?.price || '0' }}</h3>
      </div>
    
      <!-- Keep this manually as-is -->
      <div class="more-card">
        <div class="title">More Wanted Items</div>
        <div class="logo-group">
          <figure class="compIcon">
            <img src="assets/img/mrf.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/mgm.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/tata.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/sail.png" />
          </figure>
        </div>
        <ion-button
          fill="clear"
          class="btn no-style see-more-btn"
          (click)="goToLiveBids()"
        >
          See More <img src="assets/img/icons/arrow_yellow.svg" />
        </ion-button>
      </div>
    </div>
    
  </div>



    <!-- Top buyer -->
    <div class="section" *ngIf="dashboardData && dashboardData.topBuyerItems && dashboardData.topBuyerItems.results && dashboardData.topBuyerItems.results.length > 0">
      <div class="section-title">Top Buyer</div>
    
      <!-- First Row: First 2 Items -->
      <div class="cards-row">
        <div
          class="product-card"
          *ngFor="let item of ((dashboardData?.topBuyerItems?.results) ? dashboardData.topBuyerItems.results : []) | slice:0:2"
        >
          <ion-badge class="success_badg">On Buy</ion-badge>
          <div class="logoCompname">
            <figure class="compIcon">
              <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
            </figure>
            <h4>{{ item?.item_name || 'Item Name' }}</h4>
          </div>
          <p>
            Dealer Name<br />
            <b *ngIf="item?.company_name">{{ item?.company_name }}</b>
            <b *ngIf="item?.full_name">{{ item?.full_name }}</b>
          </p>
          <h3>{{ item?.price || '0' }}</h3>
        </div>
      </div>
      
    
      <!-- Second Row: Only 3rd Item -->
      <div class="cards-row">
        <div
          class="product-card"
          *ngFor="let item of ((dashboardData?.topBuyerItems?.results) ? dashboardData.topBuyerItems.results : []) | slice:2:3"
        >
          <ion-badge class="success_badg">On Buy</ion-badge>
          <div class="logoCompname">
            <figure class="compIcon">
              <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
            </figure>
            <h4>{{ item?.item_name || 'Item Name' }}</h4>
          </div>
          <p>
            Dealer Name<br />
            <b *ngIf="item?.company_name">{{ item.company_name }}</b>
            <b *ngIf="item?.full_name">{{ item.full_name }}</b>
          </p>
          <h3>{{ item?.price || '0' }}</h3>
        </div>
      
        <!-- Keep this manually as-is -->
        <div class="more-card">
          <div class="title">More Wanted Items</div>
          <div class="logo-group">
            <figure class="compIcon">
              <img src="assets/img/mrf.png" />
            </figure>
            <figure class="compIcon">
              <img src="assets/img/mgm.png" />
            </figure>
            <figure class="compIcon">
              <img src="assets/img/tata.png" />
            </figure>
            <figure class="compIcon">
              <img src="assets/img/sail.png" />
            </figure>
          </div>
          <ion-button
            fill="clear"
            class="btn no-style see-more-btn"
            (click)="goToLiveBids()"
          >
            See More <img src="assets/img/icons/arrow_yellow.svg" />
          </ion-button>
        </div>
      </div>
      
    </div>
  

  <!-- Recent Listed -->
  <div class="section">
    <div class="section-title">Recent Listed</div>
    <div class="cards-row">
      <div
        class="product-card"
        *ngFor="let item of ((dashboardData?.recentListedItems?.results) ? dashboardData.recentListedItems.results : []) | slice:0:2"
      >
        <ion-badge class="success_badg">On Buy</ion-badge>
        <div class="logoCompname">
          <figure class="compIcon">
            <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
          </figure>
          <h4>{{ item?.item_name || 'Item Name' }}</h4>
        </div>
        <p>
          Dealer Name<br />
          <b *ngIf="item?.company_name">{{ item?.company_name }}</b>
          <b *ngIf="item?.full_name">{{ item?.full_name }}</b>
        </p>
        <h3>{{ item?.price || '0' }}</h3>
      </div>
    </div>

    <div class="cards-row">
      <div class="product-card">
        <ion-badge class="worning_badg">Wanted</ion-badge>
        <div class="logoCompname">
          <figure class="compIcon">
            <img src="assets/img/mgm.png" />
          </figure>
          <h4>TATA Consultancy Services</h4>
        </div>
        <p>
          Dealer Name<br />
          <b>NP Enterprise PVT. LTD.</b>
        </p>
        <h3>25,195.80</h3>
      </div>

      <div class="more-card">
        <div class="title">More Wanted Items</div>
        <div class="logo-group">
          <figure class="compIcon">
            <img src="assets/img/mrf.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/mgm.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/tata.png" />
          </figure>
          <figure class="compIcon">
            <img src="assets/img/sail.png" />
          </figure>
        </div>
        <ion-button fill="clear" class="btn no-style see-more-btn" (click)="goToLiveBids()">
          See More <img src="assets/img/icons/arrow_yellow.svg" />
        </ion-button>
      </div>
    </div>
  </div>

  <!-- Other Items -->
  <div class="section">
    <div class="section-title">
      Other Items
      <ion-button *ngIf="(dashboardData?.otherItems?.results?.length || 0) > 5" size="small" class="btn no-style see-all-btn">See All</ion-button>
    </div>
    <div class="other-list" *ngIf="dashboardData && dashboardData.otherItems && dashboardData.otherItems.results && dashboardData.otherItems.results.length > 0">
      <ion-item class="no-style" *ngFor="let item of (dashboardData.otherItems.results | slice:0:5)">
        <ion-avatar slot="start">
          <!-- <img src="assets/img/sail.png" /> -->
          <img [src]="item?.item_image?.[0] || 'assets/img/placeholder.png'" />
        </ion-avatar>
        <ion-label>
          <h4>{{ item?.item_name || 'Item Name' }}</h4>
          <p *ngIf="item?.company_name">{{ item.company_name }}</p>
          <p *ngIf="item?.full_name">{{ item.full_name }}</p>
          <h3>{{ item?.price || '0' }}</h3>
        </ion-label>
        <div class="btnCont">
          <ion-button fill="clear" slot="end" class="btn no-style edit worning_badg">
            <ion-icon class="edit" name="create-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="btnCont multi" style="display: none;">
          <ion-button fill="clear" slot="end" class="btn no-style edit danger_badg">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" slot="end" class="btn no-style edit success_badg">
            <ion-icon name="checkmark-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item>
      <!-- <ion-item class="no-style">
        <ion-avatar slot="start">
          <img src="assets/img/sail.png" />
        </ion-avatar>
        <ion-label>
          <h4>TATA Consultancy Services</h4>
          <p>Dealer Name NP Enterprise PVT. LTD.</p>
          <h3>25,195.80</h3>
        </ion-label>
        <div class="btnCont">
          <ion-button fill="clear" slot="end" class="btn no-style edit worning_badg">
            <ion-icon class="edit" name="create-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="btnCont multi" style="display: none;">
          <ion-button fill="clear" slot="end" class="btn no-style edit danger_badg">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" slot="end" class="btn no-style edit success_badg">
            <ion-icon name="checkmark-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item>
      <ion-item class="no-style">
        <ion-avatar slot="start">
          <img src="assets/img/sail.png" />
        </ion-avatar>
        <ion-label>
          <h4>TATA Consultancy Services</h4>
          <p>Dealer Name NP Enterprise PVT. LTD.</p>
          <h3>25,195.80</h3>
        </ion-label>
        <div class="btnCont">
          <ion-button fill="clear" slot="end" class="btn no-style edit worning_badg">
            <ion-icon class="edit" name="create-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="btnCont multi" style="display: none;">
          <ion-button fill="clear" slot="end" class="btn no-style edit danger_badg">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" slot="end" class="btn no-style edit success_badg">
            <ion-icon name="checkmark-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item>
      <ion-item class="no-style">
        <ion-avatar slot="start">
          <img src="assets/img/sail.png" />
        </ion-avatar>
        <ion-label>
          <h4>TATA Consultancy Services</h4>
          <p>Dealer Name NP Enterprise PVT. LTD.</p>
          <h3>25,195.80</h3>
        </ion-label>
        <div class="btnCont">
          <ion-button fill="clear" slot="end" class="btn no-style edit worning_badg">
            <ion-icon class="edit" name="create-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="btnCont multi" style="display: none;">
          <ion-button fill="clear" slot="end" class="btn no-style edit danger_badg">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" slot="end" class="btn no-style edit success_badg">
            <ion-icon name="checkmark-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item>
      <ion-item class="no-style">
        <ion-avatar slot="start">
          <img src="assets/img/sail.png" />
        </ion-avatar>
        <ion-label>
          <h4>TATA Consultancy Services</h4>
          <p>Dealer Name NP Enterprise PVT. LTD.</p>
          <h3>25,195.80</h3>
        </ion-label>
        <div class="btnCont">
          <ion-button fill="clear" slot="end" class="btn no-style edit worning_badg">
            <ion-icon class="edit" name="create-outline"></ion-icon>
          </ion-button>
        </div>
        <div class="btnCont multi" style="display: none;">
          <ion-button fill="clear" slot="end" class="btn no-style edit danger_badg">
            <ion-icon name="close-outline"></ion-icon>
          </ion-button>
          <ion-button fill="clear" slot="end" class="btn no-style edit success_badg">
            <ion-icon name="checkmark-outline"></ion-icon>
          </ion-button>
        </div>
      </ion-item> -->
    </div>
  </div>
</ion-content>

<app-footer></app-footer>

<!--LOADER-->
<div class="loader-overlay" *ngIf="enableLoader">
  <div class="loader-container">
    <img src="assets/img/ajax-loader.gif">
    <span class="ion-text-center"> Please wait</span>
  </div>
</div>
<!--LOADER-->