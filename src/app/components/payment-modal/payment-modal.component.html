<ion-header class="planPgheader">
  <ion-toolbar>
    <ion-title>Choose Your Plan</ion-title>
    <ion-buttons slot="end">
      <ion-button fill="clear" (click)="closeModal()">
        <ion-icon name="close"></ion-icon>
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content class="payment-modal">
  <div class="modal-container">
    
    <!-- Header -->
    <div class="header-section">
      <h2>Select Your Subscription</h2>
      <p>Choose the perfect plan for your business needs</p>
    </div>

    <!-- Plans Grid -->
    <div class="plans-grid">
      <div 
        *ngFor="let package of packageList" 
        class="plan-card"
        [class.selected]="selectedPackage?.id === package.id"
        (click)="selectPackage(package)">
        
        <!-- Popular Badge -->
        <!-- <div class="popular-badge" *ngIf="plan.popular">
          <ion-icon name="star"></ion-icon>
          Most Popular
        </div> -->

        <!-- Plan Header -->
        <div class="plan-header">
          <h3>{{ package.name }}</h3>
          <!-- <p class="plan-description">{{ plan.description }}</p> -->
        </div>
        <!-- Pricing -->
        <div class="pricing">
          <div class="current-price">
            ₹{{ package.price | number:'1.2-2' }}  <small>(+ 18% GST)           </small>
          </div>
        </div>

        <!-- Features -->
        <div class="features">
          <div class="feature" *ngIf="package.coin>0">
            <ion-icon name="checkmark-circle" class="check-icon"></ion-icon>
            Coins: <b>{{ package.coin }}</b>
          </div>
         <div class="feature" >
            <ion-icon name="checkmark-circle" class="check-icon"></ion-icon>
            Participate in live bidding & promotions
          </div>
          <div class="feature" >
            <ion-icon name="checkmark-circle" class="check-icon"></ion-icon>
            Verified visibility to buyers and sellers
          </div>
           <div class="feature" >
            <ion-icon name="checkmark-circle" class="check-icon"></ion-icon>
            Priority Customer Support
          </div>
        </div>

        <!-- Selection Indicator -->
        <div class="selection-indicator" *ngIf="selectedPackage?.id === package.id">
          <ion-icon name="checkmark-circle"></ion-icon>
        </div>
      </div>
    </div>

  
   

   

    <!-- Action Buttons -->
    <div class="action-buttons">
      <ion-button 
        expand="block" 
        size="large" 
        (click)="proceedToPay()" 
        [disabled]="isProcessing || !selectedPackage"
        class="btn no-style btn-grn pay-button">
        <ion-spinner *ngIf="isProcessing" slot="start"></ion-spinner>
          <span *ngIf="!isProcessing">Pay ₹ {{ totalWithGst | number:'1.2-2' }}</span>
        <span *ngIf="isProcessing">Processing...</span>
      </ion-button>
      

      
      <ion-button 
        expand="block" 
        fill="clear" 
        size="large" 
        (click)="closeModal()"
        [disabled]="isProcessing"
        class="btn no-style cancel-button">
        Cancel
      </ion-button>
    </div> 
  </div>
</ion-content>